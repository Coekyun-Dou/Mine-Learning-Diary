## 计算机网络期末复习

[TOC]

------

### 名词解释：

- ==客户/服务器==：C/S方式，将信息统一交给服务器进行处理
- ==往返时间==：RTT，数据往返一次的时间
- ==网络的几类（广域网、城域网、局域网、个人区域网）==

  ​	WAN、MAN、LAN、PAN
- ==信道复用技术（频分复用、时分复用、波分复用、码分多址）==

​		FDM、TDM、WDM、CDMA

- ==点对点协议==

​		PPP协议

- ==媒体接入控制==

​		MAC

- ==网际控制报文协议==

​		ICMP，用于差错报告

- ==网际协议==

​		IP协议

- ==无分类域间路由选择==

​		CIDR、IP地址的一种计发

- ==地址解析协议==

​		ARP协议，负责把IP地址转换成MAC地址的

- ==传输控制协议==

​		TCP协议

- ==超文本标记语言==

​		HTML

- ==动态主机配置协议==

​		DHCP（不用手动配ip地址）

- ==域名系统==

​		DNS（把域名地址转成ip地址）

- ==文件传送协议==

​		FTP协议（记住两个端口，控制是21、传送是20）

- DNS >> 域名系统
- WWW >> 万维网
- HTTP >> 超文本传输协议
- URL >> 统一资源定位符

### 第一章：概述

#### 1、组成

- 组成成分上
  - 硬件：主机、通信链路、交换设备、通信处理机
  - 软件：网络操作系统、聊天软件
  - 协议：规则的集合
- 工作方式上：
  - 边缘部分：用户和主机
  - 核心部分：网络和路由器

#### 2、功能：资源共享、数据通信、分布式处理

#### 3、性能指标

> ==这个是考察的重点，**发送时延、传播时延、总时延的关系（教材习题1-17，P25有效数据率的计算）**==

- $发送时延=\frac{数据帧长度(bits)}{发送速率(bits/s)}$
- $传播时延=\frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}$
- $总时延=发送实验+传播时延+处理时延+排队时延$（处理时延和排队时延不用自己求）
- $时延带宽积 = 传播时延 \times带宽$
- $有效数据率=\frac{数据长度}{发送时间+RTT}$（其中，RTT是往返时间，指的是双向交互一次的时间）

#### 4、分类

- 按分布范围（广域网WAN、城域网MAN、局域网LAN、个人区域网PAN）

- 按传输技术（广播通信-LAN、点对点-LAN、拓扑结构-WAN）

- 按交换技术

  > 这个地方会考察**电路交换和分组交换的特点**

  - 电路交换网络：传统的电话网络
  - 报文交换网络：用户数据+辅助信息；先发送到临近的节点、全部存储后再发给下一个节点（存储-转发网络）
  - 分组交换网络：在报文交换的基础上，将数据进行分组，能够提高效率，更易标准化。

- 按传输媒介（有线网络、无线网络）

#### 5、五层协议的网络体系结构（从上到下）

> 要求要能够描述+简要介绍各层的基本功能

##### 1）应用层

- 描述：最高层，通过应用进程间的交互来完成特定的网络应用。

- 功能：可以通过计算机的各种应用，解析网络信息并呈现给用户

##### 2）运输层

- 描述：负责向两台主机中进程之间的通信提供通用的数据传输服务

- 功能：有复用和分用的功能。
  - 复用：应用层的多个进程一起用运输层的服务
  - 分用：运输层把收到的信息分别交付给应用层的相关进程
- 协议：
  - 传输控制协议TCP：要先建立起可靠连接，再开始通信，虽然慢但可靠
  - 用户数据报协议UDP：可以不用建立可靠连接，将数据报当作一个独立的单元来发送，发送方不用等接收方确认，效率快一点但不可靠，可以用来传音视频这些不怕失真的东西。

##### 3）网络层

- 描述：为分组交换网上的不同主机提供通信服务（来确定我发的信息要走哪条线）
- 功能：
  - 路由选择：通过一定算法，再互联网中的每一个路由器上，生成一个用来转发分组的转发表
  - 转发：每个路由器接收到一个分组时，依据转发表中指明的路径把分组转发到下一个路由器。

##### 4）数据链路层

- 描述：实现相邻节点之间的可靠通信
- 功能：在两个相邻节点间的链路上传送帧，如果发现错误，就简单地丢弃出错帧。

##### 5）物理层

- 描述：负责比特（数据0、1）的实际传输
- 功能：将网络数据转化为电信号、光信号或其他物理信号，并通过物理介质（电缆、光纤、无线电波等）进行传输

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703161730176.png" alt="image-20250703161730176" style="zoom:67%;" />

### 第二章：物理层

#### 1、基本概念

##### 1）数据、信号、和码元

- 数据：是指传送信息的实体
- 信号：是指数据的电气或电磁表现
- 码元：构成信号的一段波形

##### 2）数据传输方式

- 串行传输：一个个比特按照时间顺序传输
- 并行传输：多个比特通过多条通信信道同时传输

##### 3）信源、信道与信宿

- 信源：产生和发送数据的源头
- ==信道：信号的传输媒介（信道通信方式）$\star\star\star$==
  - 单工：只有一个方向的通信，没有反向的交互
  - 半双工：可以双向交互，但不能同时进行
  - 全双工：可以同时发送和接收信息
- 信宿：接收数据的终点

#### 2、编码与调制

##### 1）定义

- 编码：把数据变换成数字信号的过程叫做编码
- 调制：把数据变换成模拟信号的过程叫做调制

##### 2）常见的编码方式

> 这个主要要会画，知道什么时候跳变什么时候不跳变 RFID

- 不归零制：1用正电平表示，0用负电平
- 归零制：1用正脉冲表示，0用负脉冲
- 曼彻斯特编码：位周期中心向上跳变代表0，向下跳变代表1。（也可以反过来定义）
- 差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表0，位开始边界没有跳变代表1。

##### 3）基本的带通调制方法

- 调幅（AM）：用0和1分别对应无载波或有载波
- 调频（FM）：用0和1分别对应频率f1和f2
- 调相（PM）：用0和1分别对应相位0度和180度

##### 4）信道的极限容量

- 奈氏准则
- 香农公式

#### 3、传输介质

##### 1）导引型传输媒体

- 双绞线
  - F/UTP：铝箔屏蔽层的屏蔽双绞线
  - S/UTP：金属编织层的屏蔽双绞线
  - SF/UTP：在铝箔屏蔽层外面加上金属编织层进行屏蔽
  - FTP：在每一对双绞线都加上铝箔屏蔽层
- 同轴电缆
- 光纤

##### 2）非导引型传输媒体

- 地面微波接力通信
- 卫星通信

#### ==4、信道复用技术$\star\star\star$==

> 主要掌握FDM、TDM、WDM、CDMA是什么，以及它们的目的

- FDM（频分复用）：通过分配不同的频率带宽给不同的信号，使多个信号可以同一个信道传输；
- TDM（时分复用）：通过将时间分成多个时隙，使不同的信号在不同时间段内传输。
- WDM（波分复用）：通过使用不同的光波长（频率）同时在光纤上进行数据传输（其实就是光的频分复用）
- CDMA（码分多址）：通过给每个信号分配一个唯一的码，使得每个用户可以在同样的时间使用同样的频带进行通信。

```
CDMA可以考察计算题，所以需要掌握CDMA应该怎么算规格化内积，以及相关如何看是哪个站点发的数据，以及发送的数据是什么。
```

### 第三章：数据链路层（解决局域网之间的数据传输）

#### 1、数据链路层的三个问题

##### 1）封装成帧

​	在一段数据的前后添加首部SOH和尾部EOT，构成一个帧；（SOH和EOT就是一个控制字符）

​	帧的数据部分（IP数据包） <= 最大传送单元MTU

##### 2）透明传输

- 问题：如果数据中某个字节的二进制代码恰好和SOH或EOT一样，数据链路层就会错误地“找到数据边界”导致错误
- 方法：字节填充（在数据中出现控制字符SOH或EOT的前面插入一个转义字符ESC，接收端在把数据送往网络层前删除这个插入得到转义字符

##### 3）差错控制

- 问题：在发送的时候会出现比特差错，导致0变成1，1变成0，使得传输不可靠
- ==方法：用CRC循环冗余检验（考察计算！！！）$\star\star\star$==

#### 2、点对点协议PPP（Point-to-Point Protocol）

> 点对点信道 

##### 1）组成

- 一个将IP数据报**封装**到串行链路的方法
- **链路控制协议LCP**：用于建立、配置和测试数据链路连接
- **网络控制协议NCP**：每个协议支持不同的网络层协议，如IP、OSI的网络层等

##### 2）PPP是如何解决数据链路层的三个问题的？

- 封装成帧，在首部和尾部加控制字段；其中首部有一个两个字节的协议字段
- 透明传输
  - 字节填充（插入一个字节）
  - 零比特填充（连续发了五个1之后，填入比特0再发送出去）

##### 3）PPP协议的状态

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703183717093.png" alt="image-20250703183717093" style="zoom:80%;" />

#### 3、CSMA/CD协议

> 广播信道

##### 1）广播信道的问题

广播信道优先采用总线式，但是容易发送碰撞

##### 2）CSMA/CD协议（载波监听多点接入/检测碰撞）协议

> 记住十六个字：先听后发、边发边听、碰撞停止、延时重传

- 多点接入：说明这是总线型网络
- 载波监听：“边发送边监听”，发送数据每个站都要不停地检测信道
- 碰撞检测：适配器边发送数据，边检测信道上的电压变化情况，超过一定阈值时，就认为总线上至少有两个站同时在发送数据，产生了碰撞。

##### 3）集线器（用来形成星形拓扑的以太网）

` 10 BASE — T`

- 10：速率为10Mbit/s
- BASE：基带
- T：双绞线

##### 4）MAC帧的格式

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703191412185.png" alt="image-20250703191412185" style="zoom:70%;" />

#### 4、以太网的扩展

##### 1）在物理层扩展以太网

- 用光纤扩展：用光纤和一对光纤解调器连接到集线器
- 用多个集线器连成更大以太网

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703191727826.png" alt="image-20250703191727826" style="zoom:60%;" />

##### 2）在数据链路层扩展以太网

- 使用以太网交换机，是一个多端口的网桥
  - 交换机的每一个接口都是一个碰撞域
  - 交换方式：存储转发方式（先缓存再处理、直通方式）
  - ==自学习功能（$\star\star\star$) 作业题，写出转发表==

### 第四章：网络层（解决不同局域网之间的网络传输）

#### 1、网络层提供的两种服务

##### 1）虚电路服务

​	必须现在通信之前，建立一个连接，然后只能按照建立的连接链路去传输数据；缺点是如果这个链路中有一个节点出故障的话，就没办法沿着原来的路径去传输；因为是依靠网络来进行传输的，所以比较可靠。（会按照顺序发送）

##### 2）数据报服务（IP服务） 

​	不需要建立连接，每个分组会选择最适合的路去传输；依靠用户主机传输，不可靠，尽最大努力交付；

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703221548899.png" alt="image-20250703221548899" style="zoom:80%;" />

#### 2、网际协议IP

- **网际协议IP**：是TCP/IP体系结构网际层中的核心协议

- **IP地址**：分配给全世界范围内唯一的**32位**的标识符

  - MAC地址是48位，在数据链路层；而IP地址32位在网络层
  - 使用点分十进制计法

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703221924006.png" alt="image-20250703221924006" style="zoom:80%;" />

  - IP地址 :: ={<网络号>,<主机号>}

  - 分类的IP地址

    <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703222230674.png" alt="image-20250703222230674" style="zoom:80%;" />

- **地址掩码（子网掩码）**：与IP地址一起使用，用于定义一个网络中哪些部分是网络地址，哪些部分是主机地址；（求网络地址时，会用到这个地址掩码）

<img src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703222407671.png" alt="image-20250703222407671" style="zoom: 80%;" />

- **无分类编制CIDR**

  - IP地址 :: {<网络号>,<主机号>} （如果网络号是n位，那么主机号就是32-n位）

  <img align="left"  src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703222654062.png" alt="image-20250703222654062" style="zoom:80%;" />

- **网络地址**

  - 网络地址 = （二进制的IP地址） AND （地址掩码）

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703222805895.png" alt="image-20250703222805895" style="zoom:80%;" />

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250703223152042.png" alt="image-20250703223152042" style="zoom:80%;" />

- **地址解析协议ARP**
  - *地址解析协议ARP*：通过IP地址找出其相应的MAC地址
  - *逆地址解析协议RARP*：通过MAC地址找出其相应的IP地址

#### 3、网际控制报文协议ICMP

- **ICMP功能**：差错报告
- **应用**：分组网间探测PING,封装在ip数据报中

#### 4、IPV6

-  IPV6，128位，采用冒号16进制计法
- 零压缩（用来简化冒号16进制计法）

<img align ="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704005152842.png" alt="image-20250704005152842" style="zoom:80%;" />

#### 5、互联网的路由选择协议

##### 1）主要有两种

- 内部网关协议IGP：包括RIP协议和OSPF协议

  - RIP协议：基于距离向量的路由选择协议（弄懂下面这道例题就够了）

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704005829991.png" alt="image-20250704005829991" style="zoom:80%;" />

- 外部网关协议EGP：包括BGP协议

##### 2）路由器的构成

- 选择部分
- 分组转发部分

#### 6、虚拟专用网VPN和网络地址转换协议

##### 1）虚拟专用网VPN

​	利用公用的互联网作为本机构各专用网之间的通信载体，这样的专用网又称为虚拟专用网VPN。

##### 2）网络地址转换协议NAT

​	将本地址转换为全球地址。

### 第五章：运输层（解决进程与进程之间的通信问题）

#### 1、用户数据报协议UDP

##### 1）特点

​	无连接、不可靠、面向报文（对报文加了一个首部）、没有拥塞控制、支持一对一、一对多、多对多；首部开销小

##### 2）首部格式

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704010420470.png" alt="image-20250704010420470" style="zoom:80%;" />

#### 2、传输控制协议TCP概述

##### 1）特点（与UDP对比）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704010637369.png" alt="image-20250704010637369" style="zoom:80%;" />

##### 2）连接

​	每一条TCP连接有两个端口。TCP连接的端口：套接字或插口

​	套接字socket=(IP地址：端口号)

##### 3）TCP的首部格式

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704010844443.png" alt="image-20250704010844443" style="zoom:90%;" />

#### 3、TCP可靠传输的实现

##### 1）工作原理（了解即可）

- 停止等待协议

  - 发送方

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704011353706.png" alt="image-20250704011353706" style="zoom:80%;" />

  - 接收方

  <img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704011539827.png" alt="image-20250704011539827" style="zoom:80%;" />

- 连续ARQ协议

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704011726423.png" alt="image-20250704011726423" style="zoom:80%;" />

##### 2）TCP可靠传输的实现

- 以字节为单位的滑动窗口

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704091113252.png" alt="image-20250704091113252" style="zoom:80%;" />

#### 4、TCP的流量控制和拥塞控制

- 流量控制：让发送方不要发太快，要让接收方来得及接收
- 拥塞控制：对资源的需求大于可用资源。
- ==TCP拥塞控制方法$\star\star\star$：==
  - 慢开始：不知道是否会拥堵，所以就一点一点地尝试；拥塞窗口cwnd
    - 把拥塞窗口翻倍去增加，直到ssthhresh（慢开始门限值）
    - 指数型增长
  - 拥塞避免：一个一个相加去增长
    - 线性增长；
    - 超市的时候，执行拥塞避免算法，然后调制ssthresh为当前的窗口值*1/2
  - 快重传：连续收到3次ACK，执行快重传
  - 快恢复：回到前面重新执行拥塞避免的位置

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704092125256.png" alt="image-20250704092125256" style="zoom:80%;" />

#### 5、TCP的运输连接管理

##### 1）TCP的连接建立（三报文握手）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704092443657.png" alt="image-20250704092443657" style="zoom:80%;" />

##### 2）释放的时候（四次报文握手）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704092654756.png" alt="image-20250704092654756" style="zoom:80%;" />

### 第六章：应用层（为不同的用户提供不同的服务）

#### 1、域名系统DNS

​	用来将网址http://www.baidu.com转化成IP地址

- 域名结构：层次结构

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704093122284.png" alt="image-20250704093122284" style="zoom:80%;" />

- 域名结构的分类
  - 原先的顶级域名分类
    - 国家顶级域名
      - cn：中国
    - 通用顶级域名
      - com：公司企业
      - edu：美国专用教育机构
      - gov：美国的政府部门
      - org：非营利性组织
  - 我国把二级域名划分为了“类别域名”和“行政去域名两大类”
    - 类别域名
      - com、edu、gov
    - 行政区域名：适用于我国各省
      - 例如：BJ 北京 ST 汕头

#### 2、文件传输协议（FTP协议）

##### 1）FTP的工作原理

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704093607458.png" alt="image-20250704093607458" style="zoom:80%;" />

#### 3、远程中断协议TELNET

​	用来远程登录，安全的网络登录SSH

#### 4、万维网WWW

- 统一资源定位符URL：`<协议>://<主机>:<端口>/<路径>`

- 超文本传输协议HTTP：超链接传送数据的方式；熟知的端口号是80
- 超文本标记语言HTML：数据呈现的格式；

#### 5、电子邮件

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250704094814268.png" alt="image-20250704094814268" style="zoom:80%;" />

#### 6、动态主机配置协议DHCP

​	用来自动获取IP地址，不用手工分配的