## 数据库期末复习

[TOC]

------

### 第一章：数据库系统概述

> 主要记一些基本的概念就行

1、信息（information）

2、数据（data）

3、数据处理：数据+数据处理 == 信息

4、数据库（Datebase，简称DB）

5、数据库管理系统（DBMS：Date Base Manage System）

​	用户与操作系统之间的一层系统软件，SQL就是DBMS

6、数据库系统（DBS）

​	采用的数据库技术的计算机系统；

​	所以硬件>>DBS>>DBMS>>DB

------

### 第二章 关系模型

> 主要是画ER图，ER图转关系模式、以及关系代数运算
>
> ==做学习通作业题（尤其是关系代数运算）==

#### 1、概念模型（主要是一些术语）

==1）实体==

2）实体集

==3）属性==

==4）键（码）==

5）型与值：用实体名及其属性来抽象同类实体为型

​      **型**：学生（学号、姓名、性别）

​      **值**：（'94001'，'张平'，'男'）

6）值域：属性的取值范围

#### 2、ER图（用来表示概念模型的）

> 会画就行

1）实体：矩形表示

2）属性：椭圆表示

3）联系：菱形表示（然后用无向边与相应实体连接，标上联系的类型）

- 一对一
- 一对多
- 多对多

![image-20250625220007912](C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625220007912.png)

<img src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625220037977.png" alt="image-20250625220037977" style="zoom: 67%;" />

<img src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625220053529.png" alt="image-20250625220053529" style="zoom:67%;" />

#### 3、ER图转关系模式方法

1）考虑实体，一个实体转换为一个关系模式

2）考虑联系

- 1对1，任意一个关系模式，加入另一个关系模式的键就可以
- 1对多，把1端的实体加入到多端的关系模式中（涝的涝死）
- 多对多，把这个联系转成一个独立的关系模式，其中这个关系模式的属性包含相连两端实体的码，以及联系本身的属性，关系模式的码由这两个实体的码共同组成）

【例题】（把下面这道理解了就行）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625221605523.png" alt="image-20250625221605523" style="zoom: 45%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625221645776.png" alt="image-20250625221645776" style="zoom:50%;" />

#### 4、关系操作运算

##### 1）传统的集合运算

$\cup$：并

$\cap$：交

$-$：差 （$R-S=${$t|t\in{R}\wedge{t\notin{S}}$}），就是R再减去R和S的交集

$\times$：广义笛卡尔积

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625223140455.png" alt="image-20250625223140455" style="zoom: 67%;" />

##### 2）专门的关系运算

$\sigma$：选择（符合选择条件的才会被提取出来）

<img aligh="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625223239165.png" alt="image-20250625223239165" style="zoom:67%;" />

$\pi$：投影（从列的角度，给出符合的列（属性））

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250625223400083.png" alt="image-20250625223400083" style="zoom: 67%;" />

$\infty$：连接

- 等值连接
- 自然连接
- 外连接（外连接、左外连接、右外连接）

$\div$：除

------

### 第三章：SQL语言（增删改查）

> 主要是要懂得SQL的增删改查操作，会用代码进行数据库操作

#### 1、表的概念

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626010308858.png" alt="image-20250626010308858" style="zoom: 67%;" />

#### 2、数据类型

##### 一）数值类型

1、整数类型

> BIGINT > INT > MEDIUMINT > SMALLINT > TINYINT

2、定点数类型（小数点固定）

- DECIMAL(M,D)
  - M：不包括小数点的最大位数
  - D：小数点后的位数
  - 例：DECIMAL(3,2) >> x.xx

3、浮点数的类型

- float
- double

##### 二）字符串类型

1、CHAR（）：定长，不满的会在左侧补0

2、VARCHAR（）：变长，不会补0

3、ENUM$(v_1,v_2,...)$：在$v_1,v_2...$中选；如果括号内没有值则为NULL，NULL是被允许的

4、SET（集合）：值为该集合的任意子集

​      例如：`SET('a','b')`  >>  值可以取'a'、'b'、'a,b'

##### 三）日期和时间类型

- YEAR：年
- DATE：年-月-日
- TIME：年-月-日-时-分-秒

#### 三、创建表

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626170111530.png" alt="image-20250626170111530" style="zoom:80%;" />

#### 四、插入数据

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626170206719.png" alt="image-20250626170206719" style="zoom:80%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626170300540.png" alt="image-20250626170300540" style="zoom:80%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626170431832.png" alt="image-20250626170431832" style="zoom:80%;" />

【关于插入数据的小结】

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626170504863.png" alt="image-20250626170504863" style="zoom:50%;" />

#### 五、修改表

##### 1、列的添加、修改与删除

**开头都是一样的东西**：`ALTER TABLE tbl_name` 后面加上相关的选项

- ADD：添加列
- MODIFY：修改列定义
- RENAME：修改列名
- CHANGE：修改列名和定义
- SET DEFAULT：修改默认值
- DROP：删除列

##### 2、修改表名

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626171117347.png" alt="image-20250626171117347" style="zoom: 67%;" />

#### 六、更新数据

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626171232292.png" alt="image-20250626171232292" style="zoom:67%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250626171257788.png" alt="image-20250626171257788" style="zoom:67%;" />

#### 八、删除表

##### 1、单表删除语句

```mysql
DELETE FROM tbl_name
[WHERE where_condition]
```

- DELETE子句：指定要删除数据的表的名称
- WHERE子句：指定要删除的行所需满足的条件**如果没有where就删除所有行**

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627113041124.png" alt="image-20250627113041124" style="zoom:55%;" />

##### 2、多表删除语句

> 用来解决有些查找要连接多个表才能实现的条件，比如删除专业为软工的学生，就要查students和major两个表

```mysql
DELETE tbl_name1[.*][tbl_name2[.*]]...
FROM tbl_name1,tbl_name2...
[WHERE where_condition]
或：
DELETE FROM tbl_name1[.*][tbl_name2[.*]]...
USING tbl_name1,tbl_name2
[WHERE where_condition]
```

- 第一个格式中的DELETE后和第二个格式中的DELETE FROM后指定要删除的表的名称

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627113427134.png" alt="image-20250627113427134" style="zoom:60%;" />

#### 九、查找

##### 1、SELECT语句

```mysql
SELECT [ALL|DISTINCT]（*|列名） FROM tbl_name *是全选 (用DISTINCT的话是消除重复行)
WHERE [连接条件]（当多个表的时候可以给出选择条件）
```

- 使用计算表达式：

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627115348495.png" alt="image-20250627115348495" style="zoom:45%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627115710896.png" alt="image-20250627115710896" style="zoom:50%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627115806766.png" alt="image-20250627115806766" style="zoom:50%;" />

- 改变列标题 SELECT 列名 AS 新列

##### 2、单表查询

- 分组与统计（使用聚合函数，对一个组进行统计）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627115906232.png" alt="image-20250627115906232" style="zoom:50%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627115935818.png" alt="image-20250627115935818" style="zoom:50%;" />

- GROUP BY子句（分组来进行统计）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627120228038.png" alt="image-20250627120228038" style="zoom: 50%;" />

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627120310812.png" alt="image-20250627120310812" style="zoom:50%;" />

- HAVING子句（和where子句一样用来指定是筛选条件）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627120734258.png" alt="image-20250627120734258" style="zoom:50%;" />

- 对查询结果进行排序

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627120858821.png" alt="image-20250627120858821" style="zoom:50%;" />

##### 3、连接查询

###### 1）交叉连接（结果是两个表的笛卡尔积）

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627121148358.png" alt="image-20250627121148358" style="zoom:50%;" />

###### 2）内连接

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627121249474.png" alt="image-20250627121249474" style="zoom:50%;" />

**等值连接**

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627121337209.png" alt="image-20250627121337209" style="zoom:50%;" />

**非等值连接**

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627121414394.png" alt="image-20250627121414394" style="zoom:50%;" />

###### 3）外连接

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627121623151.png" alt="image-20250627121623151" style="zoom:50%;" />

### 第四章：数据库的完整性

<img align="left" src="C:\Users\Duuuzx\AppData\Roaming\Typora\typora-user-images\image-20250627122405010.png" alt="image-20250627122405010" style="zoom: 80%;" />

### 第五章：数据库应用（视图、触发器、存储过程）

### 第六章：数据库安全管理

### 第七章：数据库规范化理论

